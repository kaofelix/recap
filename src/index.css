@import "tailwindcss";

/* GitHub Desktop-inspired theme variables */
:root {
  /* Background colors */
  --theme-bg-primary: #ffffff;
  --theme-bg-secondary: #f6f8fa;
  --theme-bg-tertiary: #eaeef2;
  --theme-bg-overlay: #ffffff;
  --theme-bg-hover: #f3f4f6;
  --theme-bg-active: #e5e7eb;

  /* Text colors */
  --theme-text-primary: #24292f;
  --theme-text-secondary: #57606a;
  --theme-text-tertiary: #6e7781;
  --theme-text-placeholder: #8c959f;
  --theme-text-disabled: #8c959f;

  /* Border colors */
  --theme-border-primary: #d0d7de;
  --theme-border-secondary: #e5e7eb;
  --theme-border-muted: #d8dee4;

  /* Accent colors */
  --theme-accent-primary: #0969da;
  --theme-accent-hover: #0860c7;
  --theme-accent-muted: #ddf4ff;

  /* Diff colors */
  --theme-diff-add-bg: #dafbe1;
  --theme-diff-add-highlight: #aceebb;
  --theme-diff-add-text: #116329;
  --theme-diff-add-word-bg: #aceebb;
  --theme-diff-add-gutter-bg: #ccffd8;
  --theme-diff-delete-bg: #ffebe9;
  --theme-diff-delete-highlight: #ffc1bb;
  --theme-diff-delete-text: #82071e;
  --theme-diff-delete-word-bg: #ffc1bb;
  --theme-diff-delete-gutter-bg: #ffd7d5;
  --theme-diff-hunk-bg: #f6f8fa;

  /* Status colors */
  --theme-success: #1a7f37;
  --theme-warning: #9a6700;
  --theme-danger: #cf222e;

  /* Panel colors */
  --theme-panel-bg: #ffffff;
  --theme-panel-header-bg: #f6f8fa;
  --theme-panel-border: #d0d7de;

  /* Scrollbar */
  --theme-scrollbar-thumb: #8c959f;
  --theme-scrollbar-track: transparent;
}

.dark {
  /* Background colors */
  --theme-bg-primary: #0d1117;
  --theme-bg-secondary: #161b22;
  --theme-bg-tertiary: #21262d;
  --theme-bg-overlay: #1c2128;
  --theme-bg-hover: #21262d;
  --theme-bg-active: #30363d;

  /* Text colors */
  --theme-text-primary: #e6edf3;
  --theme-text-secondary: #8b949e;
  --theme-text-tertiary: #6e7681;
  --theme-text-placeholder: #6e7681;
  --theme-text-disabled: #484f58;

  /* Border colors */
  --theme-border-primary: #30363d;
  --theme-border-secondary: #21262d;
  --theme-border-muted: #30363d;

  /* Accent colors */
  --theme-accent-primary: #58a6ff;
  --theme-accent-hover: #79b8ff;
  --theme-accent-muted: #1f3a5f;

  /* Diff colors */
  --theme-diff-add-bg: #12261e;
  --theme-diff-add-highlight: #1f4a33;
  --theme-diff-add-text: #3fb950;
  --theme-diff-add-word-bg: #1f4a33;
  --theme-diff-add-gutter-bg: #1a4028;
  --theme-diff-delete-bg: #2d1117;
  --theme-diff-delete-highlight: #5c2429;
  --theme-diff-delete-text: #f85149;
  --theme-diff-delete-word-bg: #5c2429;
  --theme-diff-delete-gutter-bg: #4b1f24;
  --theme-diff-hunk-bg: #161b22;

  /* Status colors */
  --theme-success: #3fb950;
  --theme-warning: #d29922;
  --theme-danger: #f85149;

  /* Panel colors */
  --theme-panel-bg: #0d1117;
  --theme-panel-header-bg: #161b22;
  --theme-panel-border: #30363d;

  /* Scrollbar */
  --theme-scrollbar-thumb: #484f58;
  --theme-scrollbar-track: transparent;
}

/* Extend Tailwind with custom theme */
@theme {
  /* Background colors */
  --color-bg-primary: var(--theme-bg-primary);
  --color-bg-secondary: var(--theme-bg-secondary);
  --color-bg-tertiary: var(--theme-bg-tertiary);
  --color-bg-overlay: var(--theme-bg-overlay);
  --color-bg-hover: var(--theme-bg-hover);
  --color-bg-active: var(--theme-bg-active);

  /* Text colors */
  --color-text-primary: var(--theme-text-primary);
  --color-text-secondary: var(--theme-text-secondary);
  --color-text-tertiary: var(--theme-text-tertiary);
  --color-text-placeholder: var(--theme-text-placeholder);
  --color-text-disabled: var(--theme-text-disabled);

  /* Border colors */
  --color-border-primary: var(--theme-border-primary);
  --color-border-secondary: var(--theme-border-secondary);
  --color-border-muted: var(--theme-border-muted);

  /* Accent colors */
  --color-accent-primary: var(--theme-accent-primary);
  --color-accent-hover: var(--theme-accent-hover);
  --color-accent-muted: var(--theme-accent-muted);

  /* Diff colors */
  --color-diff-add-bg: var(--theme-diff-add-bg);
  --color-diff-add-highlight: var(--theme-diff-add-highlight);
  --color-diff-add-text: var(--theme-diff-add-text);
  --color-diff-add-word-bg: var(--theme-diff-add-word-bg);
  --color-diff-add-gutter-bg: var(--theme-diff-add-gutter-bg);
  --color-diff-delete-bg: var(--theme-diff-delete-bg);
  --color-diff-delete-highlight: var(--theme-diff-delete-highlight);
  --color-diff-delete-text: var(--theme-diff-delete-text);
  --color-diff-delete-word-bg: var(--theme-diff-delete-word-bg);
  --color-diff-delete-gutter-bg: var(--theme-diff-delete-gutter-bg);
  --color-diff-hunk-bg: var(--theme-diff-hunk-bg);

  /* Status colors */
  --color-success: var(--theme-success);
  --color-warning: var(--theme-warning);
  --color-danger: var(--theme-danger);

  /* Panel colors */
  --color-panel-bg: var(--theme-panel-bg);
  --color-panel-header-bg: var(--theme-panel-header-bg);
  --color-panel-border: var(--theme-panel-border);

  /* Scrollbar colors */
  --color-scrollbar-thumb: var(--theme-scrollbar-thumb);
  --color-scrollbar-track: var(--theme-scrollbar-track);
}

/* Base styles */
html {
  font-family: Inter, system-ui, Avenir, Helvetica, Arial, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

body {
  margin: 0;
  min-height: 100vh;
  background-color: var(--color-bg-primary);
  color: var(--color-text-primary);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: var(--color-scrollbar-track);
}

::-webkit-scrollbar-thumb {
  background: var(--color-scrollbar-thumb);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--color-text-tertiary);
}

/* Selection highlight */
::selection {
  background-color: var(--color-accent-muted);
  color: var(--color-text-primary);
}

/* File list item: use container query to hide diff stats when too narrow */
.file-list-item {
  container-type: inline-size;
}

@container (max-width: 200px) {
  .file-list-item-stats {
    display: none;
  }
}

/* Fix react-diff-viewer: blank content lines should have normal background
   The library applies emptyLine class when content is empty/falsy, treating 
   real blank lines the same as placeholders. We want only placeholders grey.
   
   Strategy: Make all empty-line cells normal background, then use :has() to 
   re-apply grey only to rows that contain an empty-gutter (true placeholders) */

/* Default: all empty-line content cells get normal background */
td[class*="empty-line"] {
  background-color: var(--color-panel-bg) !important;
}

/* Re-apply grey for placeholder rows (rows containing empty-gutter cells) */
tr:has(td[class*="empty-gutter"]) td[class*="empty-line"] {
  background-color: var(--color-bg-secondary) !important;
}

/* Theme toggle icon animation */
@keyframes theme-icon-spin {
  0% {
    transform: scale(0.5) rotate(-90deg);
    opacity: 0;
  }
  100% {
    transform: scale(1) rotate(0deg);
    opacity: 1;
  }
}

.animate-theme-icon {
  animation: theme-icon-spin 200ms ease-out;
}

/* Prism.js syntax highlighting - GitHub-inspired theme */
:root {
  --color-syntax-comment: #6a737d;
  --color-syntax-keyword: #d73a49;
  --color-syntax-function: #6f42c1;
  --color-syntax-string: #032f62;
  --color-syntax-number: #005cc5;
  --color-syntax-operator: #d73a49;
  --color-syntax-class: #6f42c1;
  --color-syntax-variable: #e36209;
  --color-syntax-constant: #005cc5;
  --color-syntax-property: #005cc5;
  --color-syntax-punctuation: #24292f;
  --color-syntax-tag: #22863a;
  --color-syntax-attr-name: #6f42c1;
  --color-syntax-attr-value: #032f62;
}

.dark {
  --color-syntax-comment: #8b949e;
  --color-syntax-keyword: #ff7b72;
  --color-syntax-function: #d2a8ff;
  --color-syntax-string: #a5d6ff;
  --color-syntax-number: #79c0ff;
  --color-syntax-operator: #ff7b72;
  --color-syntax-class: #d2a8ff;
  --color-syntax-variable: #ffa657;
  --color-syntax-constant: #79c0ff;
  --color-syntax-property: #79c0ff;
  --color-syntax-punctuation: #e6edf3;
  --color-syntax-tag: #7ee787;
  --color-syntax-attr-name: #d2a8ff;
  --color-syntax-attr-value: #a5d6ff;
}

/* Prism token styles */
.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
  color: var(--color-syntax-comment);
  font-style: italic;
}

.token.keyword,
.token.control,
.token.directive,
.token.unit {
  color: var(--color-syntax-keyword);
}

.token.function,
.token.function-variable {
  color: var(--color-syntax-function);
}

.token.string,
.token.char,
.token.regex,
.token.template-string {
  color: var(--color-syntax-string);
}

.token.number,
.token.boolean {
  color: var(--color-syntax-number);
}

.token.operator,
.token.arrow {
  color: var(--color-syntax-operator);
}

.token.class-name,
.token.maybe-class-name,
.token.builtin {
  color: var(--color-syntax-class);
}

.token.variable {
  color: var(--color-syntax-variable);
}

.token.constant,
.token.symbol {
  color: var(--color-syntax-constant);
}

.token.property,
.token.property-access {
  color: var(--color-syntax-property);
}

.token.punctuation {
  color: var(--color-syntax-punctuation);
}

.token.tag {
  color: var(--color-syntax-tag);
}

.token.attr-name {
  color: var(--color-syntax-attr-name);
}

.token.attr-value {
  color: var(--color-syntax-attr-value);
}

.token.namespace {
  opacity: 0.7;
}

.token.important,
.token.bold {
  font-weight: bold;
}

.token.italic {
  font-style: italic;
}

.token.entity {
  cursor: help;
}
